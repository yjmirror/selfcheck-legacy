{"code":"var o=Object.defineProperty,a=t=>o(t,\"__esModule\",{value:!0}),h=(t,e)=>{a(t);for(var r in e)o(t,r,{get:e[r],enumerable:!0})};h(exports,{default:()=>E});const i=\"/v2/searchSchool\",c=\"/v2/findUser\",l=\"/registerServey\";function u(t){return t.includes(\"남\")?n(t[0]+\"남\"):t.includes(\"북\")?n(t[0]+\"북\"):n(t.slice(0,2))}function n(t){if(d.includes(t))return t;throw new Error(`Unexpected area \"${t}\"`)}const d=[\"서울\",\"부산\",\"대구\",\"인천\",\"광주\",\"대전\",\"울산\",\"세종\",\"경기\",\"강원\",\"충북\",\"충남\",\"전북\",\"전남\",\"경북\",\"경남\",\"제주\"];class m{constructor(t,e){this.ctx=e,this.user=t}async searchSchool(){const{school:t,area:e}=this.user,{schulList:[{orgCode:r,atptOfcdcConctUrl:s}]}=await this.ctx.get(i,{params:{schulCrseScCode:f(S(t)),lctnScCode:C(u(e)),orgName:t,currentPageNo:1},baseURL:U});this.schoolInfo={orgCode:r,baseURL:s}}async getToken(){const{name:t,birthday:e}=this.user,{orgCode:r,baseURL:s}=this.schoolInfo,p={name:this.ctx.encrypt(t),birthday:this.ctx.encrypt(e),orgCode:r,loginType:\"school\",stdntPNo:null},{token:g}=await this.ctx.post(c,p,{baseURL:s});this.token=g}async sendSurvey(){const t={deviceUuid:\"\",rspns00:\"Y\",rspns01:\"1\",rspns02:\"1\",rspns03:null,rspns04:null,rspns05:null,rspns06:null,rspns07:\"0\",rspns08:\"0\",rspns09:\"0\",rspns10:null,rspns11:null,rspns12:null,rspns13:null,rspns14:null,rspns15:null,upperToken:this.token,upperUserNameEncpt:this.user.name};return await this.ctx.post(l,t,{baseURL:this.schoolInfo.baseURL,token:this.token})}}function S(t){if(t.endsWith(\"학교\"))return t.endsWith(\"초등학교\")?\"초등학교\":t.endsWith(\"중학교\")?\"중학교\":t.endsWith(\"고등학교\")?\"고등학교\":\"특수학교\";{const e=t[t.length-1];if(e===\"초\")return\"초등학교\";if(e===\"중\")return\"중학교\";if(e===\"고\")return\"고등학교\";if(t.includes(\"유치\")||e===\"집\")return\"유치원\";throw new Error(\"unexpected school name\")}}function f(t){return{유치원:\"1\",초등학교:\"2\",중학교:\"3\",고등학교:\"4\",특수학교:\"5\"}[t]}function C(t){return{서울:\"01\",부산:\"02\",대구:\"03\",인천:\"04\",광주:\"05\",대전:\"06\",울산:\"07\",세종:\"08\",경기:\"10\",강원:\"11\",충북:\"12\",충남:\"13\",전북:\"14\",전남:\"15\",경북:\"16\",경남:\"17\",제주:\"18\"}[t]}var E=async(t,e)=>{const r=new m(t,e);try{return await r.searchSchool(),await r.getToken(),r.sendSurvey()}catch(s){throw console.error(s),s}};const U=\"hcs.eduro.go.kr\";\n","version":27,"options":{}}
