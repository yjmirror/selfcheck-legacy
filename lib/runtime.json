{"code":"var i=Object.defineProperty,u=e=>i(e,\"__esModule\",{value:!0}),a=(e,t)=>{u(e);for(var s in t)i(e,s,{get:t[s],enumerable:!0})};a(exports,{default:()=>L});const n={SEARCH_SCHOOL:\"/v2/searchSchool\",FIND_USER:\"/v2/findUser\",UPDATE_AGREEMENT:\"/v2/updatePInfAgrmYn\",HAS_PASSWORD:\"/v2/hasPassword\",REGISTER_PASSWORD:\"/v2/registerPassword\",LOGIN_WITH_SECOND_PASSWORD:\"/v2/validatePassword\",INIT_PASSWORD:\"/v2/initPassword\",SEND_SURVEY_RESULT:\"/registerServey\",SELECT_GROUP_LIST:\"/v2/selectUserGroup\",REFRESH_USER_INFO:\"/v2/getUserInfo\",REGISTER_GROUP_LIST:\"/v2/insertUserInGroup\",REMOVE_GROUP_LIST:\"/v2/removeUserInGroup\",TEACHER_CLASS_LIST:\"/joinClassList\",MANAGER_CLASS_LIST:\"/joinDeptList\",CLASS_JOIN_LIST:\"/join\",DEPT_JOIN_LIST:\"/joinTchr\",JOIN_DETAIL:\"/joinDetail\",SEND_PUSH:\"/push\",SELECT_NOTICE_LIST:\"/v2/selectNoticeList\",SELECT_NOTICE_CONTENTS:\"/v2/selectNotice\"};function c(e){return e.includes(\"남\")?o(e[0]+\"남\"):e.includes(\"북\")?o(e[0]+\"북\"):o(e.slice(0,2))}function o(e){if(p.includes(e))return e;throw new Error(`Unexpected area \"${e}\"`)}const p=[\"서울\",\"부산\",\"대구\",\"인천\",\"광주\",\"대전\",\"울산\",\"세종\",\"경기\",\"강원\",\"충북\",\"충남\",\"전북\",\"전남\",\"경북\",\"경남\",\"제주\"];class _{constructor(e,t){this.ctx=t,this.user=e}async searchSchool(){const{school:e,area:t}=this.user,{schulList:[{orgCode:s,atptOfcdcConctUrl:r}]}=await this.ctx.get(n.SEARCH_SCHOOL,{params:{schulCrseScCode:h(g(e)),lctnScCode:E(c(t)),orgName:e,currentPageNo:1},baseURL:d});this.schoolInfo={orgCode:s,baseURL:r}}async getToken(){const{name:e,birthday:t}=this.user,{orgCode:s,baseURL:r}=this.schoolInfo,l={name:this.ctx.encrypt(e),birthday:this.ctx.encrypt(t),orgCode:s,loginType:\"school\",stdntPNo:null},{token:S}=await this.ctx.post(n.FIND_USER,l,{baseURL:r});this.token=S}async sendSurvey(){const e={deviceUuid:\"\",rspns00:\"Y\",rspns01:\"1\",rspns02:\"1\",rspns03:null,rspns04:null,rspns05:null,rspns06:null,rspns07:\"0\",rspns08:\"0\",rspns09:\"0\",rspns10:null,rspns11:null,rspns12:null,rspns13:null,rspns14:null,rspns15:null,upperToken:this.token,upperUserNameEncpt:this.user.name};return await this.ctx.post(n.SEND_SURVEY_RESULT,e,{baseURL:this.schoolInfo.baseURL,token:this.token})}}function g(e){if(e.endsWith(\"학교\"))return e.endsWith(\"초등학교\")?\"초등학교\":e.endsWith(\"중학교\")?\"중학교\":e.endsWith(\"고등학교\")?\"고등학교\":\"특수학교\";{const t=e[e.length-1];if(t===\"초\")return\"초등학교\";if(t===\"중\")return\"중학교\";if(t===\"고\")return\"고등학교\";if(e.includes(\"유치\")||t===\"집\")return\"유치원\";throw new Error(\"unexpected school name\")}}function h(e){return{유치원:\"1\",초등학교:\"2\",중학교:\"3\",고등학교:\"4\",특수학교:\"5\"}[e]}function E(e){return{서울:\"01\",부산:\"02\",대구:\"03\",인천:\"04\",광주:\"05\",대전:\"06\",울산:\"07\",세종:\"08\",경기:\"10\",강원:\"11\",충북:\"12\",충남:\"13\",전북:\"14\",전남:\"15\",경북:\"16\",경남:\"17\",제주:\"18\"}[e]}var L=async(e,t)=>{const s=new _(e,t);try{return await s.searchSchool(),await s.getToken(),s.sendSurvey()}catch(r){throw console.error(r),r}};const d=\"hcs.eduro.go.kr\";\n","version":22,"options":{}}
